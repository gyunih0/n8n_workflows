{
  "name": "personal-email-agent",
  "nodes": [
    {
      "parameters": {
        "postProcessAction": "nothing",
        "format": "resolved",
        "options": {}
      },
      "type": "n8n-nodes-base.emailReadImap",
      "typeVersion": 2.1,
      "position": [
        -192,
        -48
      ],
      "id": "8cf9953d-8cc6-4447-b5c0-b9266297c397",
      "name": "NaverMail Trigger",
      "credentials": {
        "imap": {
          "id": "LwDBek3MSRQ6OsaS",
          "name": "Naver IMAP"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "6f53354b-b2cb-49e8-b728-152581ff0024",
              "name": "subject",
              "value": "={{ $json.subject }}",
              "type": "string"
            },
            {
              "id": "fa8c0d46-f66c-4bb7-be73-1420bbeba861",
              "name": "text",
              "value": "={{ $json.text }}",
              "type": "string"
            },
            {
              "id": "a2805a57-a5fc-4900-81c0-355279bedb62",
              "name": "uid",
              "value": "={{ $json.attributes.uid }}",
              "type": "number"
            },
            {
              "id": "6e9eddac-640c-42b7-9c9b-b3214c1f84e0",
              "name": "FromEmail",
              "value": "={{ $json.from.value[0].address }}",
              "type": "string"
            },
            {
              "id": "cb09cb4f-4d8b-487d-b47b-4925ea0655ed",
              "name": "FromName",
              "value": "={{ $json.from.value[0].name }}",
              "type": "string"
            },
            {
              "id": "4ddcd4c3-06a0-48bb-a606-76ef12cfb8ab",
              "name": "domain",
              "value": "naver",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        0,
        -48
      ],
      "id": "473eb043-dffc-4f25-a12e-a29cf6332ac1",
      "name": "Edit Fields"
    },
    {
      "parameters": {
        "calendar": {
          "__rl": true,
          "value": "be9984854b7d91c83f2198024bf72c21961ec8f27ee5cc6fc01d87c1bd4575a4@group.calendar.google.com",
          "mode": "list",
          "cachedResultName": "N8N TEST"
        },
        "start": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Start', ``, 'string') }}",
        "end": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('End', ``, 'string') }}",
        "additionalFields": {
          "attendees": [
            "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('attendees0_Attendees', ``, 'string') }}"
          ],
          "description": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Description', ``, 'string') }}",
          "summary": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Summary', ``, 'string') }}"
        }
      },
      "type": "n8n-nodes-base.googleCalendarTool",
      "typeVersion": 1.3,
      "position": [
        1776,
        592
      ],
      "id": "fe5267ae-af97-4538-b935-e1f9077dfe6a",
      "name": "Cal-Write",
      "credentials": {
        "googleCalendarOAuth2Api": {
          "id": "DnUQlxREVlw2v0yU",
          "name": "Google Calendar account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "1f37583f-e649-479e-a75d-a4d4f464a9fd",
              "name": "subject",
              "value": "={{ $json.subject }}",
              "type": "string"
            },
            {
              "id": "08ed6de1-b292-4e35-a8fb-afecba428029",
              "name": "text",
              "value": "={{ $json.text }}",
              "type": "string"
            },
            {
              "id": "e1d3a3ba-b676-426f-a8ba-21700badfb2b",
              "name": "emailId",
              "value": "={{ $json.uid }}",
              "type": "number"
            },
            {
              "id": "2a8ac618-f506-4377-93ce-1e1b45b499ba",
              "name": "from",
              "value": "={{ $json.FromEmail }}",
              "type": "string"
            },
            {
              "id": "8d2924b5-6d68-4637-aa46-c4b90bf52485",
              "name": "fromName",
              "value": "={{ $json.FromName }}",
              "type": "string"
            },
            {
              "id": "9a3a327b-ba51-49fc-8aac-8c6e8b67923d",
              "name": "domain",
              "value": "={{ $json.domain }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        208,
        32
      ],
      "id": "98efa7da-985e-4516-9014-47bb3a6f452b",
      "name": "Mail Data"
    },
    {
      "parameters": {
        "content": "### ê°œì„ ì \n- spam ì²˜ë¦¬ ë“± ë‹¤ë¥¸ ì¹´í…Œê³ ë¦¬ì— ë”°ë¥¸ ì²˜ë¦¬ í”„ë¡œì„¸ìŠ¤ ì¶”ê°€ ê°€ëŠ¥\n",
        "width": 224
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -256,
        -304
      ],
      "typeVersion": 1,
      "id": "ec52675c-c632-40a7-a406-7ef1066cc606",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "operation": "getAll",
        "calendar": {
          "__rl": true,
          "value": "ggyunih0@gmail.com",
          "mode": "list",
          "cachedResultName": "ggyunih0@gmail.com"
        },
        "timeMin": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('After', ``, 'string') }}",
        "timeMax": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Before', ``, 'string') }}",
        "options": {}
      },
      "type": "n8n-nodes-base.googleCalendarTool",
      "typeVersion": 1.3,
      "position": [
        1248,
        320
      ],
      "id": "6d01bc1a-9ffd-451e-8624-f8f75df68a99",
      "name": "Cal-Read",
      "credentials": {
        "googleCalendarOAuth2Api": {
          "id": "DnUQlxREVlw2v0yU",
          "name": "Google Calendar account"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.output.category }}",
                    "rightValue": "spam",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "3ca565e4-c730-43e6-9a60-4c5eed9fbb74"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "spam"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "ab93ab0d-e1f8-4575-b066-ad2b732f55ee",
                    "leftValue": "={{ $json.output.category }}",
                    "rightValue": "meeting",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "meeting"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        736,
        32
      ],
      "id": "93a8cccb-eeac-4068-aefb-9e1f29a30853",
      "name": "Switch"
    },
    {
      "parameters": {
        "operation": "sendAndWait",
        "chatId": "7433818481",
        "message": "={{ $json.output.message }}\n{{ $json.output.existing_schedule_summary }}",
        "responseType": "customForm",
        "formFields": {
          "values": [
            {
              "fieldLabel": "schedule",
              "fieldType": "checkbox",
              "fieldOptions": {
                "values": [
                  {
                    "option": "={{ $json.output.recommend_schedule[0] }}"
                  },
                  {
                    "option": "={{ $json.output.recommend_schedule[1] }}"
                  },
                  {
                    "option": "={{ $json.output.recommend_schedule[2] }}"
                  },
                  {
                    "option": "ì„ íƒí•˜ì§€ ì•ŠìŒ"
                  }
                ]
              },
              "limitSelection": "range",
              "requiredField": true
            }
          ]
        },
        "options": {
          "messageButtonLabel": "ì¼ì • ì„ íƒí•˜ê¸°"
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        1568,
        112
      ],
      "id": "ac0e55ba-5d33-4f32-9734-6a6535823302",
      "name": "Send message and wait for response",
      "webhookId": "bc26ee01-5ea1-450e-9dd1-1aa1a77354a1",
      "credentials": {
        "telegramApi": {
          "id": "mqqU3hj8HMV1gEiC",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "options": {
          "timezone": "Asia/seoul"
        }
      },
      "type": "n8n-nodes-base.dateTimeTool",
      "typeVersion": 2,
      "position": [
        1136,
        320
      ],
      "id": "6f08160a-8505-4574-a6dd-e0c9fd730d70",
      "name": "current-date"
    },
    {
      "parameters": {
        "content": "### ìº˜ë¦°ë”ë¥¼ í™•ì¸í•˜ê³  ë¯¸íŒ… ê°€ëŠ¥í•œ ì¼ì • ì¶”ì²œ",
        "height": 416,
        "width": 544,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        944,
        48
      ],
      "typeVersion": 1,
      "id": "0632d6f8-5d8b-4960-a16a-a781230d3dab",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "content": "### ì‚¬ìš©ìì—ê²Œ ë¯¸íŒ… ìš”ì²­ ë‚´ìš©ê³¼ ì¶”ì²œ ì¼ì • ì „ë‹¬ í›„ ìŠ¹ì¸ ëŒ€ê¸° (Human Validation)",
        "height": 256,
        "width": 384,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1520,
        48
      ],
      "typeVersion": 1,
      "id": "cd5994f8-107a-4d81-bd76-4997c7b60c81",
      "name": "Sticky Note4"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "2804d76f-4355-47a3-9d38-3ec95a7ea0eb",
              "leftValue": "={{ $json.data.schedule[0] }}",
              "rightValue": "ì„ íƒí•˜ì§€ ì•ŠìŒ",
              "operator": {
                "type": "string",
                "operation": "notEquals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1728,
        112
      ],
      "id": "dfc9b0b1-350f-4b05-9f68-8ae543202c6b",
      "name": "IfConfirmed"
    },
    {
      "parameters": {
        "content": "### ìŠ¹ì¸ëœ ì¼ì •ìœ¼ë¡œ ìº˜ë¦°ë”ì— ì¼ì • ë“±ë¡ ë° ë‹µë³€ & ì´ˆëŒ€ ì´ë©”ì¼ ì „ì†¡",
        "height": 416,
        "width": 496,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1520,
        336
      ],
      "typeVersion": 1,
      "id": "8d4a22f7-5800-4d79-9a14-32fdaa32855f",
      "name": "Sticky Note5"
    },
    {
      "parameters": {
        "sendTo": "={{ $('Mail Data').item.json.from }}",
        "subject": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Subject', ``, 'string') }}",
        "message": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Message', ``, 'string') }}",
        "options": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.gmailTool",
      "typeVersion": 2.1,
      "position": [
        1888,
        592
      ],
      "id": "978c8dbd-c971-446b-a835-226018895bf2",
      "name": "Send a message in Gmail",
      "webhookId": "4dba0cad-3187-4e3e-92c4-09e8e79d097c",
      "credentials": {
        "gmailOAuth2": {
          "id": "qpFBhhIs4r2JzQr9",
          "name": "Gmail account"
        }
      }
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4.1-mini",
          "mode": "list",
          "cachedResultName": "gpt-4.1-mini"
        },
        "options": {
          "frequencyPenalty": 0
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        416,
        208
      ],
      "id": "47874349-a474-4729-a170-6f43c3a79920",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "4b9A0wVGSHlfntWd",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"category\": \"ì´ë©”ì¼ ë‚´ìš© ë¶„ë¥˜ ì¹´í…Œê³ ë¦¬\",\n  \"reason\": \"ë¶„ë¥˜í•œ ì´ìœ \"\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        592,
        208
      ],
      "id": "0d960e5c-6b85-41a8-959c-502615a55d6b",
      "name": "Structured Output Parser"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4o",
          "mode": "list",
          "cachedResultName": "gpt-4o"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        960,
        320
      ],
      "id": "5dae3936-84cf-414b-8248-cdaa3351236d",
      "name": "OpenAI Chat Model2",
      "credentials": {
        "openAiApi": {
          "id": "4b9A0wVGSHlfntWd",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"email_summary\": \"ì´ë©”ì¼ ìš”ì•½ ë‚´ìš©\",\n  \"message\": \"10ì›” 13ì¼ (ì›”) 10:00 ~ 11:00 ì–´ë–¤ ë‚´ìš©ì— ê´€í•œ ë¯¸íŒ… ìš”ì²­ ì´ë©”ì¼ì´ ìˆ˜ì‹  ë˜ì—ˆìŠµë‹ˆë‹¤. ì¼ì •ì„ ì„ íƒí•´ ì£¼ì‹œë©´ ìë™ìœ¼ë¡œ ì¼ì •ì„ ë“±ë¡í•˜ê³  ë‹µë³€ ì´ë©”ì¼ì„ ì‘ì„±, ì „ë‹¬í•˜ê² ìŠµë‹ˆë‹¤.\",\n  \"existing_schedule_summary\": \"10ì›” 13ì¼ ë‚˜ì˜ ì¼ì •: 10:00~11:00 íŒ€ íšŒì˜, 14:00~15:00 ê³ ê° ë¯¸íŒ…\",\n  \"recommend_schedule\": [\n    \"2025-10-13 10:30:00\",\n    \"2025-10-13 11:00:00\",\n    \"2025-10-13 14:00:00\"\n  ]\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        1360,
        320
      ],
      "id": "905f4f82-33cc-47d1-a7d5-f1c8f69eb5aa",
      "name": "Structured Output Parser2"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        1552,
        592
      ],
      "id": "8a548e8c-3ccc-4a6b-be30-3afb4d3085fe",
      "name": "OpenAI Chat Model3",
      "credentials": {
        "openAiApi": {
          "id": "4b9A0wVGSHlfntWd",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=ë©”ì¼ ì œëª©:\n{{ $('Mail Data').item.json.subject }}\n\në©”ì¼ ë‚´ìš©:\n{{ $('Mail Data').item.json.text }}\n\në³´ë‚¸ì‚¬ëŒ ì´ë©”ì¼ ì£¼ì†Œ:\n{{ $('Mail Data').item.json.from }}\n\në³´ë‚¸ì‚¬ëŒ ì´ë¦„:\n{{ $('Mail Data').item.json.fromName }}\n\nuid:\n{{ $('Mail Data').item.json.uid }}",
        "hasOutputParser": true,
        "messages": {
          "messageValues": [
            {
              "message": "=# ì—­í• \n\në‹¹ì‹ ì€ n8n ì›Œí¬í”Œë¡œìš°ì— ì—°ê²°ëœ AI ì—ì´ì „íŠ¸ì…ë‹ˆë‹¤.  \në‹¹ì‹ ì˜ ì—­í• ì€ ì´ë©”ì¼ ë‚´ìš©ì„ ë¶„ì„í•˜ì—¬ **ìŠ¤íŒ¸ ì—¬ë¶€**, **ì¼ì •/ë¯¸íŒ… ê´€ë¦¬ í•„ìš” ì—¬ë¶€**, í˜¹ì€ **ì¼ë°˜ ë©”ì‹œì§€**ì¸ì§€ ë¶„ë¥˜í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.  \n\n---\n\n# ì…ë ¥ í˜•ì‹\n- text(ì´ë©”ì¼ ë³¸ë¬¸): ë‚´ìš©ì´ ì—†ëŠ” ê²½ìš°ì—ëŠ” subjectë¥¼ ë¶„ì„í•˜ì—¬ íŒë‹¨í•©ë‹ˆë‹¤.\n\n# ë™ì‘ ê·œì¹™\n\n1. **ìŠ¤íŒ¸(Spam) ë¶„ë¥˜ ê¸°ì¤€**  \n   - ê´‘ê³ ì„±, í”¼ì‹±, ì‚¬ê¸°ì„±, ë¶ˆí•„ìš”í•œ ë§ˆì¼€íŒ… ë©”ì¼  \n   - ì§€ë‚˜ì¹˜ê²Œ ê³¼ì¥ëœ í™ë³´, ì˜ì‹¬ìŠ¤ëŸ¬ìš´ ë§í¬/íŒŒì¼ í¬í•¨  \n   - ì±„ìš© ê´€ë ¨ ë§ˆì¼€íŒ… ë©”ì¼ì€ í¬í•¨í•˜ì§€ ì•ŠëŠ”ë‹¤.\n\n2. **ì¼ì •/ë¯¸íŒ… ê´€ë¦¬ ë¶„ë¥˜ ê¸°ì¤€**  \n   - íšŒì˜ ì¼ì •, ë¯¸íŒ… ìš”ì²­, ì´ˆëŒ€ì¥, ì¼ì • ë³€ê²½/í™•ì¸ ìš”ì²­  \n   - í–‰ì‚¬, ì›¨ë¹„ë‚˜, ì»¨í¼ëŸ°ìŠ¤ ì´ˆëŒ€ ë©”ì¼  \n   - ìº˜ë¦°ë” ë“±ë¡ì´ë‚˜ ìº˜ë¦°ë” í™•ì¸ì´ í•„ìš”í•œ ê²½ìš°\n\n3. **ì¼ë°˜ ë©”ì‹œì§€ ë¶„ë¥˜ ê¸°ì¤€**  \n   - ìŠ¤íŒ¸ë„ ì•„ë‹ˆê³  ì¼ì • ê´€ë¦¬ê°€ í•„ìš”í•˜ì§€ ì•Šì€ ë©”ì¼\n\n---\n\n# ì¶œë ¥ í˜•ì‹\n\n- ë¶„ì„ ê²°ê³¼ëŠ” ë°˜ë“œì‹œ ì•„ë˜ JSON í˜•íƒœë¡œ ì¶œë ¥í•©ë‹ˆë‹¤:\n\n{\n  \"category\": \"spam | meeting | normal\",\n  \"reason\": \"ë¶„ë¥˜ ê·¼ê±°ë¥¼ í•œêµ­ì–´ë¡œ ê°„ë‹¨íˆ ì„¤ëª…\"\n}\n"
            }
          ]
        },
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        432,
        32
      ],
      "id": "143aae90-87c3-4253-8831-10d5e36696ea",
      "name": "Email Categorize"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=ì´ë©”ì¼ ì œëª©:  {{ $('Mail Data').item.json.subject }}\nì´ë©”ì¼ ë³¸ë¬¸: {{ $('Mail Data').item.json.text }}\nì‘ì„±ì: {{ $('Mail Data').item.json.from }}\nì‘ì„±ì ì´ë¦„: {{ $('Mail Data').item.json.fromName }}",
        "hasOutputParser": true,
        "options": {
          "systemMessage": "=# ì—­í• \në‹¹ì‹ ì€ ì´ë©”ì¼ ê¸°ë°˜ ì¼ì •ê´€ë¦¬ ì „ë¬¸ AI Agentì…ë‹ˆë‹¤.  \nì´ì „ ë…¸ë“œì—ì„œ ì´ë¯¸ \"ì¼ì • ê´€ë¦¬ê°€ í•„ìš”í•œ ì´ë©”ì¼\"ë¡œ íŒë³„ëœ ì´ë©”ì¼ë§Œ ì…ë ¥ìœ¼ë¡œ ë°›ìŠµë‹ˆë‹¤.\n\n---\n\n# ëª©í‘œ\n1. **í˜„ì¬ ì‹œê°„ ê¸°ì¤€ì  í™•ì¸**  \n   - ë°˜ë“œì‹œ `current-date` íˆ´ì„ ì‚¬ìš©í•˜ì—¬ í˜„ì¬ ë‚ ì§œÂ·ì‹œê°„ì„ íšë“í•©ë‹ˆë‹¤.\n\n2. **ì´ë©”ì¼ ë¶„ì„**  \n   - ì´ë©”ì¼ ì œëª©ê³¼ ë³¸ë¬¸ì„ ë¶„ì„í•˜ì—¬ íšŒì˜ ë˜ëŠ” ë¯¸íŒ… ìš”ì²­ ì—¬ë¶€, ìš”ì²­ëœ ì¼ì/ì‹œê°„, ìš”ì²­ ëª©ì ì„ ì¶”ì¶œí•©ë‹ˆë‹¤.\n\n3. **í•´ë‹¹ ë‚ ì§œì˜ ì¼ì • ì¡°íšŒ ë° ìš”ì•½**  \n   - ìš”ì²­ëœ ì¼ìê°€ í™•ì¸ë˜ë©´ `Cal-read` íˆ´ì„ ì‚¬ìš©í•˜ì—¬ ê·¸ **ë‚ ì§œ ì „ì²´ì˜ ë‚˜ì˜ ì¼ì •**ì„ ì¡°íšŒí•©ë‹ˆë‹¤.\n   - ì¡°íšŒí•œ ì¼ì •ì„ ê°„ë‹¨íˆ ìš”ì•½í•˜ì—¬ ì¶œë ¥ì— í¬í•¨ì‹œí‚µë‹ˆë‹¤.  \n\n4. **ì¼ì • ì¶©ëŒ í™•ì¸**  \n   - ìš”ì²­ëœ ì‹œê°„ëŒ€ê°€ ê¸°ì¡´ ì¼ì •ê³¼ ê²¹ì¹˜ëŠ”ì§€ íŒë³„í•©ë‹ˆë‹¤.\n\n5. **ì¶”ì²œ ì¼ì • ì œì•ˆ**  \n   - ì¼ì • ë“±ë¡ì´ ê°€ëŠ¥í•œ ì¶”ì²œ ì¼ì •ì„ 3ê°€ì§€ ì œì‹œí•©ë‹ˆë‹¤.\n   - ê·œì¹™:\n     - ìš”ì²­ëœ ì¼ìÂ·ì‹œê°„ì´ ê°€ëŠ¥í•˜ë‹¤ë©´ ê·¸ëŒ€ë¡œ ì¶”ì²œí•©ë‹ˆë‹¤.\n     - ë¶ˆê°€ëŠ¥í•  ê²½ìš° ë¹„ìŠ·í•œ ë‚ ì§œ/ì‹œê°„ìœ¼ë¡œ ì¶”ì²œí•©ë‹ˆë‹¤.\n     - ê°€ê¸‰ì  í‰ì¼ì— ì¶”ì²œí•©ë‹ˆë‹¤.\n     - ì‹œê°„ëŒ€ëŠ” **10:00~12:00**, **13:00~18:00** ì‚¬ì´ë¥¼ ìš°ì„ í•©ë‹ˆë‹¤.\n\n6. **ì¶œë ¥ í˜•ì‹**  \n   - email_summaryì—ëŠ” ìˆ˜ì‹ ëœ ì´ë©”ì¼ì˜ ë‚´ìš© ìš”ì•½ì„ ë‹´ìŠµë‹ˆë‹¤.\n   - messageì—ëŠ” ìˆ˜ì‹ ëœ ì´ë©”ì¼ì˜ í•µì‹¬ ë‚´ìš©ì„ ìš”ì•½í•˜ì—¬ ì•ˆë‚´ë¬¸ í˜•íƒœë¡œ ì‘ì„±í•©ë‹ˆë‹¤. \n     - ì´ë©”ì¼ì˜ ìš”ì•½ë¬¸ê³¼ \"ì¼ì •ì„ ì„ íƒí•´ ì£¼ì‹œë©´ ìë™ìœ¼ë¡œ ì¼ì •ì„ ë“±ë¡í•˜ê³  ë‹µë³€ ì´ë©”ì¼ì„ ì‘ì„±, ì „ë‹¬í•˜ê² ìŠµë‹ˆë‹¤.\" ì˜ ë‚´ìš©ì„ ë°˜ë“œì‹œ í¬í•¨í•  ê²ƒ.\n   - recommend_scheduleì—ëŠ” ISO í˜•ì‹(YYYY-MM-DD HH:mm:ss)ì˜ 3ê°€ì§€ ì¶”ì²œ ì¼ì •ì„ ë°°ì—´ë¡œ ì‘ì„±í•©ë‹ˆë‹¤.\n   - existing_schedule_summary í•„ë“œëŠ” ë°˜ë“œì‹œ í•´ë‹¹ ë‚ ì§œì˜ ë‚˜ì˜ ì¼ì • ìš”ì•½ì„ ë‹´ìŠµë‹ˆë‹¤.\n\n7. **ì£¼ì˜ì‚¬í•­**\n   - ë¶ˆí•„ìš”í•œ ì„¤ëª…ì´ë‚˜ ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë¥¼ ì¶”ê°€í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\n   - ì¼ì • ì¶”ì²œì€ í˜„ì‹¤ì ìœ¼ë¡œ ê°€ëŠ¥í•œ ì‹œê°„ëŒ€ë§Œ ì œì‹œí•´ì•¼ í•©ë‹ˆë‹¤.\n"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        1072,
        112
      ],
      "id": "11b43903-98b5-4bbc-b3f6-c3843cbb1efa",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=ìŠ¹ì¸ëœ ì¼ì •: {{ $json.data.schedule[0] }}\në©”ì¼ ìš”ì•½ë‚´ìš©: {{ $('AI Agent').item.json.output.email_summary }}\nì¼ì • ìš”ì²­ì ì´ë©”ì¼: {{ $('Mail Data').item.json.fromName }}\nì¼ì • ìš”ì²­ì ì´ë¦„: {{ $('Mail Data').item.json.fromName }}",
        "options": {
          "systemMessage": "=# ì—­í• \në‹¹ì‹ ì€ ì¼ì • ë“±ë¡ ë° ë‹µë³€ ì´ë©”ì¼ ë°œì†¡ì„ ë‹´ë‹¹í•˜ëŠ” AI Agentì…ë‹ˆë‹¤.  \nì…ë ¥ìœ¼ë¡œ ì´ë¯¸ ìŠ¹ì¸ëœ ì¼ì • ì •ë³´ì™€ ë©”ì¼ ìš”ì•½, ìš”ì²­ì ì •ë³´ê°€ ì£¼ì–´ì§‘ë‹ˆë‹¤.\n\n---\n\n# ëª©í‘œ\n1. **ì¼ì • ë“±ë¡ (Cal-write)**  \n   - ìŠ¹ì¸ëœ ì¼ì •ì„ ê¸°ì¤€ìœ¼ë¡œ ë‚˜ì˜ ìº˜ë¦°ë”ì— ì¼ì •ì„ ë“±ë¡í•©ë‹ˆë‹¤.\n      - ë°˜ë“œì‹œ Asia/Seoul ì‹œê°„ëŒ€ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì¼ì •ì„ ë“±ë¡í•©ë‹ˆë‹¤.\n   - ì°¸ì„ì: ì¼ì • ìš”ì²­ì ì´ë©”ì¼ì„ ì´ˆëŒ€í•©ë‹ˆë‹¤.\n\n2. **ë‹µë³€ ì´ë©”ì¼ ì‘ì„± ë° ì „ì†¡ (Send a message in Gmail)**  \n   - ì¼ì • ë“±ë¡ í›„ ìƒì„±ëœ ì´ˆëŒ€ ë§í¬(Calendar event link)ë¥¼ í™œìš©í•©ë‹ˆë‹¤.  \n   - íšŒì‹  ë©”ì¼ì˜ ì œëª©ì€ í•­ìƒ \"[Re]\"ë¥¼ ë¶™ì—¬ ì›ë˜ ì œëª©ì„ ì¸ìš©í•˜ë˜, ì–¸ì œ ì–´ë–¤ ë¯¸íŒ…ì¸ì§€ ìš”ì•½í•´ì„œ ëª…í™•íˆ ê¸°ì¬í•©ë‹ˆë‹¤.\n     - ì˜ˆ: \"[Re]8ì›” 15ì¼ AI Agent Buildì— ê´€í•œ ë¯¸íŒ…ì˜ ê±´\"\n   - ë©”ì¼ ìˆ˜ì‹ ì: ì¼ì • ìš”ì²­ì ì´ë©”ì¼  \n   - ë©”ì¼ ë³¸ë¬¸(í•œê¸€ ê³ ì •):\n     ```\n     ì•ˆë…•í•˜ì„¸ìš”, {{ $('Mail Data').item.json.fromName }}ë‹˜.\n\n     ìš”ì²­í•˜ì‹  ì¼ì •ì´ ì•„ë˜ì™€ ê°™ì´ í™•ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\n\n     ğŸ“… ì¼ì •: [ìº˜ë¦°ë”ì— ë“±ë¡í•œ ì¼ì •]\n     ğŸ“„ ë‚´ìš©: [ë¯¸íŒ…, íšŒì˜ ë‚´ìš©]\n\n     ì•„ë˜ ì´ˆëŒ€ ë§í¬ë¥¼ í†µí•´ ìº˜ë¦°ë” ì¼ì •ì„ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.  \n     [ë“±ë¡ëœ ìº˜ë¦°ë” ì´ˆëŒ€ ë§í¬]\n\n     ê°ì‚¬í•©ë‹ˆë‹¤.\n     ```\n   - ë°˜ë“œì‹œ `Send a message in Gmail` íˆ´ì„ ì‚¬ìš©í•˜ì—¬ ì „ì†¡í•©ë‹ˆë‹¤.\n\n---\n\n# ì£¼ì˜ì‚¬í•­\n- ë°˜ë“œì‹œ `Cal-write` â†’ `Send a message in Gmail` ìˆœì„œë¡œ ì‹¤í–‰í•©ë‹ˆë‹¤.  \n- `calendar_event_link`ëŠ” Cal-write íˆ´ì—ì„œ ìƒì„±ëœ ì‹¤ì œ ì´ˆëŒ€ ë§í¬ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.  \n- ë¶ˆí•„ìš”í•œ ì„¤ëª…ì´ë‚˜ ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë¥¼ ì¶”ê°€í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.  \n- ë©”ì¼ ë³¸ë¬¸ì€ ì´ë©”ì¼ë¡œ ê¹”ë”í•˜ê²Œ ë³´ì¼ ìˆ˜ ìˆë„ë¡ html í˜•ì‹ìœ¼ë¡œ ì •ë¦¬í•˜ì—¬ ì „ì†¡í•©ë‹ˆë‹¤.\n"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        1600,
        384
      ],
      "id": "cc9dc6fc-1a07-494d-b829-79b55d164977",
      "name": "AI Agent2"
    },
    {
      "parameters": {
        "content": "## Email Trigger",
        "height": 368,
        "width": 592,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -256,
        -112
      ],
      "typeVersion": 1,
      "id": "2817dfaf-3ca6-474d-9f83-7ccf95f0d7cf",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "content": "## ì´ë©”ì¼ ì¹´í…Œê³ ë¦¬ ë¶„ë¥˜\n1. ìŠ¤íŒ¸ ì´ë©”ì¼\n2. ë¯¸íŒ… ë° ì¼ì • ê´€ë¦¬ê°€ í•„ìš”í•œ ì´ë©”ì¼\n3. (ì¶”í›„ í™•ì¥ ê°€ëŠ¥)",
        "height": 432,
        "width": 496
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        368,
        -96
      ],
      "typeVersion": 1,
      "id": "097c14f5-a006-4d44-ab50-732c9c149a58",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "authentication": "coreImapAccount",
        "resource": "email",
        "operation": "moveEmail",
        "sourceMailbox": {
          "__rl": true,
          "mode": "list",
          "value": "INBOX"
        },
        "emailUid": "={{ $('Mail Data').item.json.emailId }}",
        "destinationMailbox": {
          "__rl": true,
          "value": "[Gmail]/ìŠ¤íŒ¸í•¨",
          "mode": "list",
          "cachedResultName": "[Gmail]/ìŠ¤íŒ¸í•¨"
        }
      },
      "type": "n8n-nodes-imap.imap",
      "typeVersion": 1,
      "position": [
        1248,
        -160
      ],
      "id": "fa68f1a4-4b99-4c86-aafa-477455e381d2",
      "name": "MoveGmailEmail",
      "credentials": {
        "imap": {
          "id": "N2nKDP5iUD9FePjs",
          "name": "Gmail IMAP"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "ac92d095-a963-44e3-9baf-48781bc32941",
                    "leftValue": "={{ $('Mail Data').item.json.domain }}",
                    "rightValue": "naver",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "naver"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Mail Data').item.json.domain }}",
                    "rightValue": "gmail",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "8336d32e-a6a4-4491-950b-8676692b50db"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "gmail"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        992,
        -224
      ],
      "id": "873c9cff-f94d-4c28-bb50-8e97522352b9",
      "name": "Switch1"
    },
    {
      "parameters": {
        "authentication": "coreImapAccount",
        "resource": "email",
        "operation": "moveEmail",
        "sourceMailbox": {
          "__rl": true,
          "mode": "list",
          "value": "INBOX"
        },
        "emailUid": "={{ $('Mail Data').item.json.emailId }}",
        "destinationMailbox": {
          "__rl": true,
          "value": "Junk",
          "mode": "list",
          "cachedResultName": "Junk"
        }
      },
      "type": "n8n-nodes-imap.imap",
      "typeVersion": 1,
      "position": [
        1248,
        -304
      ],
      "id": "f7cfc274-536d-428a-9327-d2828fa13d04",
      "name": "moveNaverEmail",
      "credentials": {
        "imap": {
          "id": "LwDBek3MSRQ6OsaS",
          "name": "Naver IMAP"
        }
      }
    },
    {
      "parameters": {
        "content": "## ì´ë©”ì¼ ìŠ¤íŒ¸ì²˜ë¦¬",
        "height": 320,
        "width": 512,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        944,
        -320
      ],
      "typeVersion": 1,
      "id": "949937bb-4606-4d24-986c-acd701b28a2d",
      "name": "Sticky Note6"
    },
    {
      "parameters": {
        "postProcessAction": "nothing",
        "format": "resolved",
        "options": {
          "trackLastMessageId": true
        }
      },
      "type": "n8n-nodes-base.emailReadImap",
      "typeVersion": 2.1,
      "position": [
        -192,
        112
      ],
      "id": "d429728a-0a57-4d1b-931b-79e6c1f69f8d",
      "name": "Gmail Trigger",
      "credentials": {
        "imap": {
          "id": "N2nKDP5iUD9FePjs",
          "name": "Gmail IMAP"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "6f53354b-b2cb-49e8-b728-152581ff0024",
              "name": "subject",
              "value": "={{ $json.subject }}",
              "type": "string"
            },
            {
              "id": "fa8c0d46-f66c-4bb7-be73-1420bbeba861",
              "name": "text",
              "value": "={{ $json.text }}",
              "type": "string"
            },
            {
              "id": "a2805a57-a5fc-4900-81c0-355279bedb62",
              "name": "uid",
              "value": "={{ $json.attributes.uid }}",
              "type": "number"
            },
            {
              "id": "5530f568-592c-44d8-a272-c2ef9ae114d8",
              "name": "domain",
              "value": "gmail",
              "type": "string"
            },
            {
              "id": "5a8a64d7-2bfb-441d-8c2c-cba0c018d8c0",
              "name": "FromName",
              "value": "={{ $json.from.value[0].name }}",
              "type": "string"
            },
            {
              "id": "55f86961-b622-454a-8137-5c99165cd0b2",
              "name": "FromEmail",
              "value": "={{ $json.from.value[0].address }}",
              "type": "string"
            }
          ]
        },
        "options": {
          "ignoreConversionErrors": true
        }
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        0,
        112
      ],
      "id": "fe273ca4-e6b1-4a58-9b9c-2104816bf63a",
      "name": "Edit Fields1"
    }
  ],
  "pinData": {},
  "connections": {
    "NaverMail Trigger": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields": {
      "main": [
        [
          {
            "node": "Mail Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cal-Write": {
      "ai_tool": [
        [
          {
            "node": "AI Agent2",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Mail Data": {
      "main": [
        [
          {
            "node": "Email Categorize",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cal-Read": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Switch": {
      "main": [
        [
          {
            "node": "Switch1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send message and wait for response": {
      "main": [
        [
          {
            "node": "IfConfirmed",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "current-date": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "IfConfirmed": {
      "main": [
        [
          {
            "node": "AI Agent2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a message in Gmail": {
      "ai_tool": [
        [
          {
            "node": "AI Agent2",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Email Categorize",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser": {
      "ai_outputParser": [
        [
          {
            "node": "Email Categorize",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model2": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser2": {
      "ai_outputParser": [
        [
          {
            "node": "AI Agent",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model3": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent2",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Email Categorize": {
      "main": [
        [
          {
            "node": "Switch",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "Send message and wait for response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch1": {
      "main": [
        [
          {
            "node": "moveNaverEmail",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "MoveGmailEmail",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Gmail Trigger": {
      "main": [
        [
          {
            "node": "Edit Fields1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields1": {
      "main": [
        [
          {
            "node": "Mail Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "5fe84185-b0f3-402b-8a1b-003766c36ace",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "558d88703fb65b2d0e44613bc35916258b0f0bf983c5d4730c00c424b77ca36a"
  },
  "id": "Rke4TV6OtPzRk5DL",
  "tags": []
}