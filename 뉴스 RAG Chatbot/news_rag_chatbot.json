{
  "name": "news_rag_chatbot",
  "nodes": [
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $('Telegram Trigger').item.json.message.text }}",
        "options": {
          "systemMessage": "=# ì—­í• : \në‹¹ì‹ ì€ ë‰´ìŠ¤ ê²€ìƒ‰ & ì›¹ ê²€ìƒ‰ ì§€ì› ì—ì´ì „íŠ¸ì…ë‹ˆë‹¤.  \në‹¹ì‹ ì˜ ì—­í• ì€ ì‚¬ìš©ìì˜ ì§ˆë¬¸ì„ ë°›ì•„ ë²¡í„° ë°ì´í„°ë² ì´ìŠ¤(Vector DB)ì—ì„œ ê´€ë ¨ ë‰´ìŠ¤ ë°ì´í„°ë¥¼ ê²€ìƒ‰í•˜ê³  ìš”ì•½í•˜ì—¬ í…”ë ˆê·¸ë¨ ë©”ì‹œì§€ë¡œ ì „ì†¡í•  ë©”ì‹œì§€ë¥¼ ë§Œë“œëŠ” ê²ƒì…ë‹ˆë‹¤.  \në§Œì•½ ë²¡í„° DBì—ì„œ ì ì ˆí•œ ì •ë³´ë¥¼ ì°¾ì§€ ëª»í•˜ê±°ë‚˜ ì‚¬ìš©ìê°€ ì›¹ ê²€ìƒ‰ì„ ìš”ì²­í•˜ëŠ” ê²½ìš°, ë³„ë„ë¡œ ì œê³µëœ `web_search_tool`ì„ ì‚¬ìš©í•˜ì—¬ ì •ë³´ë¥¼ ìˆ˜ì§‘í•˜ê³  ë‹µë³€í•´ì•¼ í•©ë‹ˆë‹¤.\n\n---\n\n## ë™ì‘ ì›ì¹™\n\n1. **1ë‹¨ê³„ â€“ Vector DB ê²€ìƒ‰**  \n   - í•­ìƒ ë¨¼ì € ë²¡í„° DBì—ì„œ ì‚¬ìš©ìì˜ ì§ˆë¬¸ê³¼ ì˜ë¯¸ì ìœ¼ë¡œ ê´€ë ¨ëœ ë‰´ìŠ¤ë¥¼ ê²€ìƒ‰í•©ë‹ˆë‹¤.  \n   - ê´€ë ¨ ê¸°ì‚¬ê°€ ìˆë‹¤ë©´ í•µì‹¬ ë‚´ìš©ì„ ìš”ì•½í•˜ê³ , ì´í•´í•˜ê¸° ì‰½ê²Œ ì •ë¦¬í•´ì„œ í…”ë ˆê·¸ë¨ ë©”ì‹œì§€ë¡œ ë³´ëƒ…ë‹ˆë‹¤.\n\n2. **2ë‹¨ê³„ â€“ ì›¹ ê²€ìƒ‰ íˆ´ ì‚¬ìš© (ë³´ì¡° ë‹¨ê³„)**  \n   - ì•„ë˜ ìƒí™© ì¤‘ í•˜ë‚˜ì— í•´ë‹¹í•˜ë©´ `web_search_tool`ì„ ì‚¬ìš©í•©ë‹ˆë‹¤:\n     - ë²¡í„° DBì—ì„œ ê´€ë ¨ ì •ë³´ë¥¼ ì°¾ì§€ ëª»í–ˆê±°ë‚˜ ë„ˆë¬´ ì˜¤ë˜ëœ ê²½ìš° \n     - ê²€ìƒ‰ ê²°ê³¼ê°€ ë¶€ì •í™•í•˜ê±°ë‚˜ ë¶ˆì¶©ë¶„í•œ ê²½ìš°  \n     - ì‚¬ìš©ìê°€ â€œì‹¤ì‹œê°„â€, â€œì›¹ì—ì„œ ì°¾ì•„ì¤˜â€ ë“±ì˜ ë‹¨ì–´ë¡œ ì›¹ ê²€ìƒ‰ì„ ëª…ì‹œì ìœ¼ë¡œ ìš”ì²­í•œ ê²½ìš°  \n   - ì›¹ ê²€ìƒ‰ì„ ì‚¬ìš©í•œ ê²½ìš°, ê²°ê³¼ë¥¼ ìš”ì•½í•˜ë©´ì„œ ë°˜ë“œì‹œ â€œğŸ” ì›¹ ê²€ìƒ‰ ê²°ê³¼ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì •ë¦¬í•œ ë‚´ìš©ì…ë‹ˆë‹¤.â€ë¼ëŠ” ë¬¸êµ¬ë¥¼ í¬í•¨í•©ë‹ˆë‹¤.\n\n3. **3ë‹¨ê³„ â€“ ê²°ê³¼ ì—†ìŒ ì²˜ë¦¬ (ìµœì¢… ëŒ€ì‘)**  \n   - ë²¡í„° DBì™€ ì›¹ ê²€ìƒ‰ ëª¨ë‘ì—ì„œ ê´€ë ¨ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ê±°ë‚˜, ì œê³µí•  ë§Œí•œ ë‚´ìš©ì´ ì „í˜€ ì—†ëŠ” ê²½ìš° ë°˜ë“œì‹œ ì•„ë˜ ì¤‘ í•˜ë‚˜ì™€ ê°™ì€ ë©”ì‹œì§€ë¥¼ ì‚¬ìš©ìì—ê²Œ ë³´ë‚´ì•¼ í•©ë‹ˆë‹¤:\n     - â€œâ— ê´€ë ¨ëœ ë‰´ìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.â€  \n     - â€œí˜„ì¬ í•´ë‹¹ ì£¼ì œì— ëŒ€í•œ ë‰´ìŠ¤ë‚˜ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.â€  \n     - â€œì£„ì†¡í•©ë‹ˆë‹¤. ìš”ì²­í•˜ì‹  ë‚´ìš©ê³¼ ê´€ë ¨ëœ ë°ì´í„°ë¥¼ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.â€  \n\n---\n\n## ì‘ë‹µ ì‘ì„± ê·œì¹™\n\n- í…”ë ˆê·¸ë¨ ë©”ì‹œì§€ë¡œ ì „ì†¡ë˜ë¯€ë¡œ **ì§§ê³  ëª…í™•í•œ í•œêµ­ì–´**ë¡œ ë‹µë³€í•©ë‹ˆë‹¤.  \n- ìµœëŒ€ 10ë¬¸ì¥ ì´ë‚´ë¡œ ìš”ì•½í•˜ê³ , í•„ìš” ì‹œ í•µì‹¬ í¬ì¸íŠ¸ë¥¼ ë¶ˆë¦¿ í¬ì¸íŠ¸ë¡œ ì •ë¦¬í•©ë‹ˆë‹¤.  \n- ê°€ëŠ¥í•˜ë‹¤ë©´ ê¸°ì‚¬ ë‚ ì§œ, ì¶œì²˜, ë§¥ë½ì„ í•¨ê»˜ ì œê³µí•©ë‹ˆë‹¤.  \n- ì‘ë‹µ êµ¬ì¡°ëŠ” ì•„ë˜ í˜•ì‹ì„ ë”°ë¥´ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤:\n  - ğŸ“° **ìš”ì•½:** [í•µì‹¬ ë‚´ìš© ìš”ì•½]  \n  - ğŸ“Œ **í•µì‹¬ í¬ì¸íŠ¸:**  \n    - [í¬ì¸íŠ¸ 1]  \n    - [í¬ì¸íŠ¸ 2]  \n    - [í¬ì¸íŠ¸ 3]\n- ì›¹ ê²€ìƒ‰ì„ ì‚¬ìš©í•œ ê²½ìš° ë§ˆì§€ë§‰ì— ë‹¤ìŒ ë¬¸ì¥ì„ ì¶”ê°€í•©ë‹ˆë‹¤:  \n  â€œğŸ” ì›¹ ê²€ìƒ‰ ê²°ê³¼ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì •ë¦¬í•œ ë‚´ìš©ì…ë‹ˆë‹¤.â€\n\n---\n\n## ë™ì‘ ì˜ˆì‹œ\n\n- ì‚¬ìš©ì: â€œì‚¼ì„±ì „ì ìµœê·¼ AI íˆ¬ì ì†Œì‹ ì•Œë ¤ì¤˜â€  \n  - â†’ ë²¡í„° DBì—ì„œ ê´€ë ¨ ë‰´ìŠ¤ ê²€ìƒ‰ â†’ ìˆìœ¼ë©´ ìš”ì•½ í›„ ì‘ë‹µ  \n  - â†’ ì—†ê±°ë‚˜ ì˜¤ë˜ëœ ê²½ìš° â†’ `web_search_tool` ì‚¬ìš© â†’ ê²°ê³¼ ìš”ì•½  \n  - â†’ ê·¸ë˜ë„ ì—†ìœ¼ë©´ â€œâ— ê´€ë ¨ëœ ë‰´ìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.â€ ë¼ê³  ì‘ë‹µ\n\n- ì‚¬ìš©ì: â€œì›¹ì—ì„œ ìµœì‹  ë‰´ìŠ¤ë§Œ ì°¾ì•„ì¤˜â€  \n  - â†’ ë²¡í„° DB ìƒëµ â†’ `web_search_tool` ì‚¬ìš© â†’ ìš”ì•½  \n  - â†’ ê²°ê³¼ê°€ ì—†ìœ¼ë©´ â€œí˜„ì¬ í•´ë‹¹ ì£¼ì œì— ëŒ€í•œ ë‰´ìŠ¤ë‚˜ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.â€ ë¼ê³  ì‘ë‹µ\n\n---\n\nğŸ“Œ ë°˜ë“œì‹œ ìœ„ì˜ íë¦„ê³¼ ê·œì¹™ì„ ë”°ë¥´ê³ , ì–´ë– í•œ ìƒí™©ì—ì„œë„ ë¹ˆ ì‘ë‹µì„ ë³´ë‚´ì§€ ë§ê³  í•­ìƒ ëª…í™•í•œ ë©”ì‹œì§€ë¥¼ ë°˜í™˜í•´ì•¼ í•©ë‹ˆë‹¤."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        -64,
        -208
      ],
      "id": "1c359151-03a2-4464-a3a0-545d0b0de4d4",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        -128,
        -32
      ],
      "id": "f3036095-5719-4fb5-9d9c-cc1e449bbf06",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "4b9A0wVGSHlfntWd",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "description": "ë‰´ìŠ¤ ë²¡í„° ê²€ìƒ‰ íˆ´",
        "topK": 5
      },
      "type": "@n8n/n8n-nodes-langchain.toolVectorStore",
      "typeVersion": 1.1,
      "position": [
        112,
        0
      ],
      "id": "47ec2727-1d13-4c8b-808d-ba5ec5494252",
      "name": "news_vector_tool"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        -16,
        288
      ],
      "id": "fd3bc3b8-0a6c-474c-9ee0-a4cf5f2dd698",
      "name": "Embeddings OpenAI1",
      "credentials": {
        "openAiApi": {
          "id": "4b9A0wVGSHlfntWd",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        256,
        144
      ],
      "id": "50dae5ff-dad6-4463-ae8c-6251f12af599",
      "name": "OpenAI Chat Model1",
      "credentials": {
        "openAiApi": {
          "id": "4b9A0wVGSHlfntWd",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "description": "ì›¹ ê²€ìƒ‰ì„ ìœ„í•œ íˆ´",
        "workflowId": {
          "__rl": true,
          "value": "YuHzXa09hMhuqaFs",
          "mode": "list",
          "cachedResultName": "search tool"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {},
          "matchingColumns": [],
          "schema": [],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.2,
      "position": [
        416,
        32
      ],
      "id": "e783b24c-817f-4fe1-8063-0b3a3bf966c7",
      "name": "web_search_tool"
    },
    {
      "parameters": {
        "content": "## ë‰´ìŠ¤ RAG(+ì›¹ê²€ìƒ‰) ì±—ë´‡",
        "height": 736,
        "width": 1104,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -496,
        -288
      ],
      "typeVersion": 1,
      "id": "0063ee76-ca9f-463e-8dfa-157dbe0efaac",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "tableName": {
          "__rl": true,
          "value": "documents",
          "mode": "list",
          "cachedResultName": "documents"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreSupabase",
      "typeVersion": 1.3,
      "position": [
        -16,
        144
      ],
      "id": "810121c3-cdc3-4135-802f-a49f2f06be33",
      "name": "Supabase Vector Store1",
      "credentials": {
        "supabaseApi": {
          "id": "EAPIK5MffbAbmOZS",
          "name": "Supabase account"
        }
      }
    },
    {
      "parameters": {
        "updates": [
          "message"
        ],
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegramTrigger",
      "typeVersion": 1.2,
      "position": [
        -464,
        -208
      ],
      "id": "ce314d05-114b-48df-b4aa-57775d4a3179",
      "name": "Telegram Trigger",
      "webhookId": "b06daf9e-5b8e-4bbc-819c-a67e89ee20e2",
      "credentials": {
        "telegramApi": {
          "id": "mqqU3hj8HMV1gEiC",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $('Telegram Trigger').item.json.update_id }}"
      },
      "type": "@n8n/n8n-nodes-langchain.memoryPostgresChat",
      "typeVersion": 1.3,
      "position": [
        16,
        0
      ],
      "id": "c5084013-78bd-4e71-b2b7-5171b327791b",
      "name": "Postgres Chat Memory",
      "credentials": {
        "postgres": {
          "id": "fKKmu8VonqG0eAEM",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "7433818481",
        "text": "={{ $json.output }}",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        336,
        -208
      ],
      "id": "967eed7c-03cc-4c02-b5a5-131e0776a73c",
      "name": "Send a text message",
      "webhookId": "99114276-f7c2-4c30-936f-5db8de765c78",
      "credentials": {
        "telegramApi": {
          "id": "mqqU3hj8HMV1gEiC",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "operation": "sendChatAction",
        "chatId": "={{ $json.message.from.id }}"
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -272,
        -208
      ],
      "id": "06b8027f-d127-4c9f-bb34-ec579e552f8c",
      "name": "Send a chat action",
      "webhookId": "7fbac06a-17a8-45d5-bd8a-32f7274c02e6",
      "credentials": {
        "telegramApi": {
          "id": "mqqU3hj8HMV1gEiC",
          "name": "Telegram account"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "news_vector_tool": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI1": {
      "ai_embedding": [
        [
          {
            "node": "Supabase Vector Store1",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "news_vector_tool",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "web_search_tool": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Supabase Vector Store1": {
      "ai_vectorStore": [
        [
          {
            "node": "news_vector_tool",
            "type": "ai_vectorStore",
            "index": 0
          }
        ]
      ]
    },
    "Telegram Trigger": {
      "main": [
        [
          {
            "node": "Send a chat action",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Postgres Chat Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "Send a text message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a chat action": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "4975dfdb-57ca-458f-97a3-98ded530a53d",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "558d88703fb65b2d0e44613bc35916258b0f0bf983c5d4730c00c424b77ca36a"
  },
  "id": "uOIrhYipzYa4cUNe",
  "tags": []
}